(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2937:function(e,t,s){Promise.resolve().then(s.bind(s,1597))},1597:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return D}});var r=s(7437),a=s(2265);let n=s(357).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";async function l(e,t){let s=await fetch("".concat(n,"/api/clone"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})});if(!s.ok)throw Error((await s.json().catch(()=>({detail:"Clone request failed"}))).detail||"Clone request failed");if(!s.body)throw Error("No response body");let r=s.body.getReader(),a=new TextDecoder,l="";for(;;){let{done:e,value:s}=await r.read();if(e)break;let n=(l+=a.decode(s,{stream:!0})).split("\n");for(let e of(l=n.pop()||"",n))if(e.startsWith("data: ")){let s=e.slice(6).trim();if("[DONE]"===s)return;try{t(JSON.parse(s))}catch(e){}}}}async function i(){let e=await fetch("".concat(n,"/api/clones"));return e.ok?e.json():[]}function o(e){return e.startsWith("http://")||e.startsWith("https://")?e:"".concat(n).concat(e)}var c=s(4817),d=s(233),m=s(5353),x=s(2757),u=s(3231),h=s(6780),f=s(4436),p=s(1976),g=s(933),b=s(5733),j=s(7419),N=s(2468),v=s(6884),w=s(3787),y=s(3907),k=s(6848),C=s(3274),Z=s(4697),S=s(7592);let _={search:c.Z,camera:d.Z,cpu:m.Z,rocket:x.Z,done:u.Z,error:h.Z};function E(e,t){return"error"===e?"error":"done"===e?"done":"deploying"===e?"rocket":"generating"===e?"cpu":t.toLowerCase().includes("screenshot")?"camera":"search"}function D(){var e,t;let[s,c]=(0,a.useState)(""),[m,x]=(0,a.useState)("idle"),[h,D]=(0,a.useState)(null),[T,R]=(0,a.useState)([]),[L,O]=(0,a.useState)(!1),[P,U]=(0,a.useState)(null),[W,I]=(0,a.useState)(null),[A,q]=(0,a.useState)([]),[B,F]=(0,a.useState)(!1),[J,V]=(0,a.useState)([]),z=(0,a.useRef)(null),X=(0,a.useRef)(null),G=(0,a.useRef)(0);(0,a.useEffect)(()=>{i().then(q).catch(()=>{})},[]),(0,a.useEffect)(()=>{var e;"idle"===m&&(null===(e=z.current)||void 0===e||e.focus())},[m]),(0,a.useEffect)(()=>{var e;null===(e=X.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[J]);let H=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"active",r=++G.current;V(a=>[...a.map(e=>"message"===e.kind&&"active"===e.status?{...e,status:"done"}:e),{kind:"message",id:r,icon:e,message:t,timestamp:new Date,status:s}])},K=(e,t)=>{let s=++G.current;V(r=>[...r,{kind:"file",id:s,file:e,lines:t,timestamp:new Date}])},M=async()=>{if(!s.trim())return;let e=s.trim();/^https?:\/\//i.test(e)||(e="https://"+e),x("scraping"),I(null),D(null),R([]),O(!1),U(null),V([]),G.current=0,H("search","Starting clone process...");try{await l(e,e=>{if("file_write"===e.status)e.file&&e.lines&&K(e.file,e.lines);else if("screenshot"===e.status){if(e.screenshot){let t=++G.current;V(s=>[...s.map(e=>"message"===e.kind&&"active"===e.status?{...e,status:"done"}:e),{kind:"screenshot",id:t,src:"data:image/png;base64,".concat(e.screenshot),timestamp:new Date}])}H("camera","Screenshot captured","done")}else"file_upload"===e.status?H("rocket",e.message||"Uploading file..."):"sandbox_ready"===e.status?(e.preview_url&&D(o(e.preview_url)),H("rocket","Sandbox ready â€” loading preview...","done")):"scraping"===e.status?(x("scraping"),H(E(e.status,e.message||""),e.message||"")):"generating"===e.status?(x("generating"),H(E(e.status,e.message||""),e.message||"")):"deploying"===e.status?(x("deploying"),H("rocket",e.message||"Deploying...")):"done"===e.status?(x("done"),H("done","Clone complete!","done"),e.files&&e.files.length>0&&(R(e.files),U(e.files[0].path)),e.preview_url&&D(o(e.preview_url)),i().then(q).catch(()=>{})):"error"===e.status&&(x("error"),I(e.message||"Unknown error"),H("error",e.message||"Unknown error","error"))})}catch(t){x("error");let e=t instanceof Error?t.message:"Something went wrong";I(e),H("error",e,"error")}},Q=async()=>{let e=T.find(e=>e.path===P);e&&(await navigator.clipboard.writeText(e.content),F(!0),setTimeout(()=>F(!1),2e3))},Y=e=>{var t;D((t=e.id,"".concat(n,"/api/preview/").concat(t))),x("done"),c(e.url),R([]),V([{kind:"message",id:1,icon:"done",message:"Loaded from history",timestamp:new Date,status:"done"}])},$=()=>{x("idle"),c(""),D(null),R([]),I(null),O(!1),U(null),V([])},ee="scraping"===m||"generating"===m||"deploying"===m,et="done"===m&&(h||T.length>0),es=ee||et||"error"===m,er=(null===(e=T.find(e=>e.path===P))||void 0===e?void 0:e.content)||"";return es?(0,r.jsxs)("main",{className:"h-screen flex flex-col",children:[(0,r.jsxs)("div",{className:"shrink-0 flex items-center gap-2 px-4 py-2.5 border-b bg-card/80 backdrop-blur-sm",children:[(0,r.jsxs)("button",{onClick:$,className:"flex items-center gap-2 text-sm font-medium hover:text-primary transition-colors mr-2",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4"}),"Clonr"]}),(0,r.jsx)("div",{className:"w-px h-5 bg-border"}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground truncate max-w-[300px] ml-2",children:s.replace(/^https?:\/\//,"")}),(0,r.jsx)("div",{className:"flex-1"}),et&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center bg-secondary rounded-lg p-0.5",children:[(0,r.jsxs)("button",{onClick:()=>O(!1),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm transition-all ".concat(L?"text-muted-foreground hover:text-foreground":"bg-background text-foreground shadow-sm"),children:[(0,r.jsx)(b.Z,{className:"w-3.5 h-3.5"}),"Preview"]}),(0,r.jsxs)("button",{onClick:()=>O(!0),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm transition-all ".concat(L?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,r.jsx)(j.Z,{className:"w-3.5 h-3.5"}),"Code"]})]}),L&&P&&(0,r.jsxs)("button",{onClick:Q,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm text-muted-foreground hover:text-foreground hover:bg-secondary transition-all",children:[B?(0,r.jsx)(N.Z,{className:"w-3.5 h-3.5 text-green-400"}):(0,r.jsx)(v.Z,{className:"w-3.5 h-3.5"}),B?"Copied":"Copy"]}),h&&(0,r.jsx)("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm text-muted-foreground hover:text-foreground hover:bg-secondary transition-all",children:(0,r.jsx)(w.Z,{className:"w-3.5 h-3.5"})})]}),(0,r.jsx)("button",{onClick:$,className:"bg-primary text-primary-foreground rounded-lg px-4 py-1.5 text-sm font-medium hover:bg-primary/90 transition-all flex items-center gap-2",children:"New clone"})]}),(0,r.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,r.jsxs)("div",{className:"w-80 shrink-0 border-r bg-card/50 flex flex-col",children:[(0,r.jsx)("div",{className:"px-4 py-3 border-b",children:(0,r.jsxs)("h2",{className:"text-sm font-semibold flex items-center gap-2",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4 text-primary"}),"Activity"]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-3",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[J.map(e=>{if("screenshot"===e.kind)return(0,r.jsxs)("div",{className:"py-2 px-2 rounded-lg",children:[(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mb-1.5 flex items-center gap-1.5",children:[(0,r.jsx)(d.Z,{className:"w-3 h-3"})," Screenshot captured"]}),(0,r.jsx)("img",{src:e.src,alt:"Website screenshot",className:"w-full rounded-md border border-border/50"})]},e.id);if("file"===e.kind)return(0,r.jsxs)("div",{className:"flex items-center gap-3 py-2 px-3 rounded-lg bg-secondary/50 border border-border/50",children:[(0,r.jsx)(k.Z,{className:"w-4 h-4 text-muted-foreground shrink-0"}),(0,r.jsx)("span",{className:"text-sm text-foreground truncate flex-1 font-mono",children:e.file}),(0,r.jsxs)("span",{className:"text-xs font-mono text-green-400 shrink-0",children:["+",e.lines]})]},e.id);let t=_[e.icon];return(0,r.jsxs)("div",{className:"flex items-start gap-3 py-2 px-2 rounded-lg transition-colors ".concat("active"===e.status?"bg-primary/5":""),children:[(0,r.jsx)("div",{className:"mt-0.5 shrink-0 ".concat("active"===e.status?"text-primary":"error"===e.status?"text-destructive":"text-muted-foreground"),children:"active"===e.status?(0,r.jsx)(C.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(t,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm leading-snug ".concat("active"===e.status?"text-foreground":"error"===e.status?"text-destructive":"text-muted-foreground"),children:e.message}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground/50 mt-0.5",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),"done"===e.status&&"done"!==e.icon&&(0,r.jsx)(u.Z,{className:"w-3.5 h-3.5 text-green-500 mt-0.5 shrink-0"})]},e.id)}),(0,r.jsx)("div",{ref:X})]}),ee&&(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-border/50",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-primary animate-pulse"}),"Working..."]})})]})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[ee&&!h&&(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center bg-muted/20",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"relative inline-flex items-center justify-center mb-6",children:[(0,r.jsx)("div",{className:"absolute w-20 h-20 rounded-full bg-primary/20 animate-pulse-ring"}),(0,r.jsx)("div",{className:"absolute w-14 h-14 rounded-full bg-primary/10 animate-pulse"}),(0,r.jsx)(y.Z,{className:"relative w-8 h-8 text-primary"})]}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:"Building your clone..."})]})}),ee&&h&&(0,r.jsx)("iframe",{src:h,className:"w-full h-full border-0",title:"Cloned website preview",sandbox:"allow-scripts allow-same-origin"}),"error"===m&&(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center max-w-sm",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-destructive/10 mb-4",children:(0,r.jsx)(Z.Z,{className:"w-7 h-7 text-destructive"})}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Clone failed"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:W}),(0,r.jsx)("button",{onClick:$,className:"bg-card border border-border rounded-xl px-5 py-2 text-sm font-medium hover:bg-secondary transition-colors",children:"Try again"})]})}),et&&!L&&h&&(0,r.jsx)("iframe",{src:h,className:"w-full h-full border-0",title:"Cloned website preview",sandbox:"allow-scripts allow-same-origin"}),et&&!L&&!h&&T.length>0&&(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center bg-muted/20",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(k.Z,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm mb-2",children:"No sandbox preview available"}),(0,r.jsx)("button",{onClick:()=>O(!0),className:"text-primary text-sm hover:underline",children:"View generated code instead"})]})}),et&&L&&T.length>0&&(0,r.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,r.jsxs)("div",{className:"w-56 shrink-0 border-r bg-[hsl(220,13%,5%)] overflow-y-auto",children:[(0,r.jsx)("div",{className:"px-3 py-2 border-b border-border/50",children:(0,r.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Files"})}),(0,r.jsx)("div",{className:"py-1",children:T.map(e=>(0,r.jsxs)("button",{onClick:()=>U(e.path),className:"w-full flex items-center gap-2 px-3 py-1.5 text-left text-sm transition-colors ".concat(P===e.path?"bg-primary/10 text-foreground":"text-muted-foreground hover:text-foreground hover:bg-secondary/30"),children:[(0,r.jsx)(k.Z,{className:"w-3.5 h-3.5 shrink-0"}),(0,r.jsx)("span",{className:"truncate font-mono text-xs",children:e.path}),(0,r.jsx)(S.Z,{className:"w-3 h-3 ml-auto shrink-0 transition-transform ".concat(P===e.path?"rotate-90":"")})]},e.path))})]}),(0,r.jsx)("div",{className:"flex-1 overflow-auto bg-[hsl(220,13%,3%)]",children:P&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"sticky top-0 z-10 flex items-center gap-2 px-4 py-2 bg-[hsl(220,13%,5%)] border-b border-border/50",children:[(0,r.jsx)(k.Z,{className:"w-3.5 h-3.5 text-muted-foreground"}),(0,r.jsx)("span",{className:"text-xs font-mono text-muted-foreground",children:P}),(0,r.jsxs)("span",{className:"text-xs font-mono text-green-400 ml-auto",children:[(null===(t=T.find(e=>e.path===P))||void 0===t?void 0:t.lines)||0," lines"]})]}),(0,r.jsx)("pre",{className:"p-4 text-sm font-mono leading-relaxed whitespace-pre-wrap",children:(0,r.jsx)("code",{className:"text-muted-foreground",children:er})})]})})]})]})]})]}):(0,r.jsx)("main",{className:"min-h-screen flex flex-col",children:(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center px-4",children:[(0,r.jsxs)("div",{className:"mb-8 text-center",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary/10 mb-6",children:(0,r.jsx)(f.Z,{className:"w-8 h-8 text-primary"})}),(0,r.jsx)("h1",{className:"text-4xl font-bold tracking-tight mb-3",children:"Clone any website"}),(0,r.jsx)("p",{className:"text-muted-foreground text-lg max-w-md",children:"Paste a URL and get an AI-generated Next.js replica in seconds"})]}),(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),M()},className:"w-full max-w-xl",children:(0,r.jsxs)("div",{className:"relative flex items-center bg-card border border-border rounded-2xl px-4 py-2 focus-within:ring-2 focus-within:ring-primary/50 focus-within:border-primary/50 transition-all",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5 text-muted-foreground shrink-0"}),(0,r.jsx)("input",{ref:z,type:"text",placeholder:"https://example.com",value:s,onChange:e=>c(e.target.value),className:"flex-1 bg-transparent border-0 outline-none px-3 py-2 text-base placeholder:text-muted-foreground"}),(0,r.jsxs)("button",{type:"submit",disabled:!s.trim(),className:"shrink-0 bg-primary text-primary-foreground rounded-xl px-4 py-2 text-sm font-medium hover:bg-primary/90 disabled:opacity-30 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:["Clone",(0,r.jsx)(p.Z,{className:"w-4 h-4"})]})]})}),A.length>0&&(0,r.jsxs)("div",{className:"mt-12 w-full max-w-xl",children:[(0,r.jsxs)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-3 flex items-center gap-1.5",children:[(0,r.jsx)(g.Z,{className:"w-3 h-3"})," Recent"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:A.slice(0,6).map(e=>(0,r.jsx)("button",{onClick:()=>Y(e),className:"text-sm px-3 py-1.5 rounded-lg bg-secondary hover:bg-secondary/80 text-secondary-foreground truncate max-w-[220px] transition-colors",children:e.url.replace(/^https?:\/\//,"")},e.id))})]})]})})}}},function(e){e.O(0,[581,971,23,744],function(){return e(e.s=2937)}),_N_E=e.O()}]);